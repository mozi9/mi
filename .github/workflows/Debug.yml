name: Sync SuSFS Files

on:
  workflow_dispatch:

jobs:
  sync-susfs:
    runs-on: ubuntu-latest
    timeout-minutes: 30

    steps:
    - name: Verify Secret Exists
      run: |
        echo "MOZI9 exists: ${{ secrets.MOZI9 != '' }}"

    - name: Checkout source repository
      uses: actions/checkout@v4
      with:
        repository: mozi9/mi
        ref: cs
        path: source-repo
        token: ${{ secrets.MOZI9 }}  # 改为 MOZI9

    - name: Configure Git
      run: |
        git config --global user.name "mozi9"
        git config --global user.email "mozi9@users.noreply.github.com"

    - name: Push to target repository
      run: |
        cd source-repo
        git push https://mozi9:${{ secrets.MOZI9 }}@github.com/mozi9/kernel_xiaomi_sm8250.git cs:cs --force
